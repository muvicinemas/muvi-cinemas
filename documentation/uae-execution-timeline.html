<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Muvi UAE Build ‚Äî Execution Timeline</title>
<style>
  :root {
    --bg: #0d1117;
    --surface: #161b22;
    --surface2: #1c2333;
    --border: #30363d;
    --text: #e6edf3;
    --text-dim: #8b949e;
    --accent: #58a6ff;
    --green: #3fb950;
    --green-dim: rgba(63,185,80,0.15);
    --orange: #d29922;
    --orange-dim: rgba(210,153,34,0.15);
    --red: #f85149;
    --red-dim: rgba(248,81,73,0.15);
    --purple: #bc8cff;
    --purple-dim: rgba(188,140,255,0.15);
    --cyan: #39d2c0;
    --cyan-dim: rgba(57,210,192,0.15);
    --gold: #e3b341;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    padding: 0;
  }

  /* Header */
  .hero {
    background: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #1a1e2e 100%);
    border-bottom: 1px solid var(--border);
    padding: 48px 32px 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at 50% 0%, rgba(88,166,255,0.08) 0%, transparent 70%);
    pointer-events: none;
  }
  .hero h1 {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 8px;
    background: linear-gradient(135deg, var(--accent), var(--cyan));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .hero .subtitle {
    color: var(--text-dim);
    font-size: 1.05rem;
    margin-bottom: 24px;
  }

  /* Summary bar */
  .summary-bar {
    display: flex;
    justify-content: center;
    gap: 32px;
    flex-wrap: wrap;
  }
  .summary-stat {
    text-align: center;
  }
  .summary-stat .number {
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent);
    display: block;
    line-height: 1.2;
  }
  .summary-stat .label {
    font-size: 0.82rem;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Container */
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 40px 24px 80px;
  }

  /* Phase block */
  .phase {
    margin-bottom: 56px;
    position: relative;
  }

  .phase-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
    position: relative;
  }

  .phase-badge {
    width: 56px;
    height: 56px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
    position: relative;
    z-index: 2;
  }
  .phase-badge.p1 { background: var(--red-dim); border: 1px solid var(--red); }
  .phase-badge.p2 { background: var(--orange-dim); border: 1px solid var(--orange); }
  .phase-badge.p2b { background: var(--purple-dim); border: 1px solid var(--purple); }

  .phase-title-block h2 {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text);
  }
  .phase-title-block .phase-meta {
    font-size: 0.85rem;
    color: var(--text-dim);
  }
  .phase-title-block .phase-meta .done-tag {
    display: inline-block;
    background: var(--green-dim);
    color: var(--green);
    padding: 1px 10px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.75rem;
    margin-left: 4px;
    vertical-align: middle;
  }

  /* Analogy banner */
  .analogy-banner {
    background: var(--surface2);
    border-left: 3px solid var(--accent);
    padding: 16px 20px;
    border-radius: 0 8px 8px 0;
    margin-bottom: 24px;
    font-size: 0.95rem;
    color: var(--text-dim);
  }
  .analogy-banner strong { color: var(--text); }

  /* Action cards */
  .action-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .action-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    transition: border-color 0.2s;
  }
  .action-card:hover {
    border-color: var(--accent);
  }

  .action-card-header {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px 20px;
    cursor: pointer;
    user-select: none;
  }

  .action-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    flex-shrink: 0;
  }

  .action-card-header .action-title {
    flex: 1;
  }
  .action-card-header .action-title h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 2px;
  }
  .action-card-header .action-title .action-plain {
    font-size: 0.88rem;
    color: var(--text-dim);
  }

  .action-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.82rem;
    font-weight: 600;
    color: var(--green);
    white-space: nowrap;
  }

  .chevron {
    color: var(--text-dim);
    transition: transform 0.25s;
    font-size: 0.9rem;
    margin-left: 8px;
  }
  .action-card.open .chevron {
    transform: rotate(180deg);
  }

  .action-detail {
    display: none;
    padding: 0 20px 20px;
    border-top: 1px solid var(--border);
  }
  .action-card.open .action-detail {
    display: block;
  }

  .detail-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 14px;
    font-size: 0.85rem;
  }
  .detail-table th {
    text-align: left;
    color: var(--text-dim);
    font-weight: 600;
    padding: 8px 12px;
    border-bottom: 1px solid var(--border);
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.5px;
  }
  .detail-table td {
    padding: 8px 12px;
    border-bottom: 1px solid rgba(48,54,61,0.5);
    color: var(--text);
    font-family: 'SFMono-Regular', Consolas, monospace;
    font-size: 0.82rem;
  }
  .detail-table tr:last-child td { border-bottom: none; }
  .detail-table .val-good { color: var(--green); }
  .detail-table .val-warn { color: var(--orange); }
  .detail-table .val-size { color: var(--cyan); }

  .detail-note {
    margin-top: 12px;
    padding: 10px 14px;
    background: rgba(88,166,255,0.06);
    border-radius: 8px;
    font-size: 0.84rem;
    color: var(--text-dim);
  }
  .detail-note.warn {
    background: rgba(248,81,73,0.08);
    border-left: 3px solid var(--red);
  }

  /* Cost savings callout */
  .savings-callout {
    display: flex;
    align-items: center;
    gap: 16px;
    background: linear-gradient(135deg, rgba(63,185,80,0.08), rgba(63,185,80,0.02));
    border: 1px solid rgba(63,185,80,0.3);
    border-radius: 12px;
    padding: 20px 24px;
    margin-top: 24px;
  }
  .savings-callout .savings-icon {
    font-size: 2rem;
  }
  .savings-callout .savings-text {
    flex: 1;
  }
  .savings-callout .savings-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--green);
  }
  .savings-callout .savings-label {
    font-size: 0.85rem;
    color: var(--text-dim);
  }

  /* Cost added callout */
  .cost-callout {
    display: flex;
    align-items: center;
    gap: 16px;
    background: linear-gradient(135deg, rgba(210,153,34,0.08), rgba(210,153,34,0.02));
    border: 1px solid rgba(210,153,34,0.3);
    border-radius: 12px;
    padding: 20px 24px;
    margin-top: 24px;
  }
  .cost-callout .cost-icon { font-size: 2rem; }
  .cost-callout .cost-text { flex: 1; }
  .cost-callout .cost-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--orange);
  }
  .cost-callout .cost-label {
    font-size: 0.85rem;
    color: var(--text-dim);
  }

  /* Migration stats */
  .migration-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
    margin-top: 20px;
  }
  .mig-stat {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 16px;
    text-align: center;
  }
  .mig-stat .mig-num {
    font-size: 1.4rem;
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
  }
  .mig-stat .mig-num.cyan { color: var(--cyan); }
  .mig-stat .mig-num.purple { color: var(--purple); }
  .mig-stat .mig-num.green { color: var(--green); }
  .mig-stat .mig-num.orange { color: var(--orange); }
  .mig-stat .mig-num.accent { color: var(--accent); }
  .mig-stat .mig-label {
    font-size: 0.78rem;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }

  /* Timeline connector between phases */
  .phase-connector {
    width: 2px;
    height: 32px;
    background: var(--border);
    margin: 0 auto;
    position: relative;
    margin-bottom: 16px;
  }
  .phase-connector::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 8px;
    background: var(--accent);
    border-radius: 50%;
  }

  /* Endpoint map */
  .endpoint-map {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 16px;
  }
  .endpoint-card {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 16px;
  }
  .endpoint-card .ep-service {
    font-weight: 700;
    font-size: 0.9rem;
    color: var(--accent);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .endpoint-card .ep-row {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    margin-bottom: 6px;
    font-size: 0.78rem;
  }
  .endpoint-card .ep-label {
    color: var(--text-dim);
    white-space: nowrap;
    min-width: 48px;
  }
  .endpoint-card .ep-val {
    color: var(--text);
    font-family: 'SFMono-Regular', Consolas, monospace;
    font-size: 0.74rem;
    word-break: break-all;
  }

  /* Correction badge */
  .correction-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: var(--red-dim);
    color: var(--red);
    padding: 2px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 8px;
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 40px 24px;
    border-top: 1px solid var(--border);
    color: var(--text-dim);
    font-size: 0.85rem;
  }
  .footer .heart { color: var(--red); }

  /* Responsive */
  @media (max-width: 700px) {
    .hero h1 { font-size: 1.5rem; }
    .summary-bar { gap: 20px; }
    .summary-stat .number { font-size: 1.5rem; }
    .endpoint-map { grid-template-columns: 1fr; }
    .container { padding: 24px 16px 60px; }
  }

  /* Expand all button */
  .expand-toggle {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-dim);
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    margin-bottom: 20px;
    transition: all 0.2s;
  }
  .expand-toggle:hover {
    border-color: var(--accent);
    color: var(--text);
  }

  /* Search */
  .search-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 16px;
    margin-bottom: 32px;
    transition: border-color 0.2s;
  }
  .search-bar:focus-within { border-color: var(--accent); }
  .search-bar input {
    flex: 1;
    background: none;
    border: none;
    outline: none;
    color: var(--text);
    font-size: 0.95rem;
  }
  .search-bar input::placeholder { color: var(--text-dim); }
  .search-icon { color: var(--text-dim); font-size: 1rem; }
</style>
</head>
<body>

<!-- HERO -->
<div class="hero">
  <h1>üá¶üá™ Muvi UAE Build ‚Äî Execution Timeline</h1>
  <p class="subtitle">Mirroring production from Account 2 ‚Üí UAE (me-central-1) in Account 1 for UAT &amp; Load Testing</p>
  <div class="summary-bar">
    <div class="summary-stat">
      <span class="number">3</span>
      <span class="label">Phases Complete</span>
    </div>
    <div class="summary-stat">
      <span class="number" style="color:var(--green)">$691</span>
      <span class="label">Monthly Savings</span>
    </div>
    <div class="summary-stat">
      <span class="number" style="color:var(--cyan)">52.9M</span>
      <span class="label">Rows Migrated</span>
    </div>
    <div class="summary-stat">
      <span class="number" style="color:var(--purple)">18.6 GB</span>
      <span class="label">Data Transferred</span>
    </div>
    <div class="summary-stat">
      <span class="number" style="color:var(--orange)">~3 hrs</span>
      <span class="label">Total Duration</span>
    </div>
  </div>
</div>

<!-- CONTENT -->
<div class="container">

  <div class="search-bar">
    <span class="search-icon">üîç</span>
    <input type="text" id="searchInput" placeholder="Search actions, resources, IDs..." oninput="filterCards(this.value)">
  </div>

  <button class="expand-toggle" onclick="toggleAll()">
    <span id="toggleIcon">‚ñ∂</span> <span id="toggleText">Expand All Details</span>
  </button>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PHASE 1 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="phase" data-phase="1">
    <div class="phase-header">
      <div class="phase-badge p1">üßπ</div>
      <div class="phase-title-block">
        <h2>Phase 1 ‚Äî Teardown &amp; Clean Slate</h2>
        <div class="phase-meta">February 24, 2026 &nbsp;‚Ä¢&nbsp; UAE me-central-1 <span class="done-tag">COMPLETE</span></div>
      </div>
    </div>

    <div class="analogy-banner">
      <strong>Plain English:</strong> We inherited a messy building with junk rooms, abandoned hallways, and doors leading nowhere. This phase was about clearing out all the trash so we have a clean empty building to work with.
    </div>

    <div class="action-list">

      <!-- 1.1 Scale ECS to 0 -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--red-dim)">‚è∏Ô∏è</div>
          <div class="action-title">
            <h3>Stopped 6 Running Services</h3>
            <div class="action-plain">Turned off all 6 apps that were running and burning money doing nothing ‚Äî like turning off TVs in empty hotel rooms</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Service</th><th>Was Running</th><th>Now</th></tr></thead>
            <tbody>
              <tr><td>muvi-gateway</td><td>2 tasks</td><td class="val-good">0 (stopped)</td></tr>
              <tr><td>muvi-main</td><td>2 tasks</td><td class="val-good">0 (stopped)</td></tr>
              <tr><td>muvi-identity</td><td>2 tasks</td><td class="val-good">0 (stopped)</td></tr>
              <tr><td>muvi-payment</td><td>2 tasks</td><td class="val-good">0 (stopped)</td></tr>
              <tr><td>muvi-notification</td><td>2 tasks</td><td class="val-good">0 (stopped)</td></tr>
              <tr><td>muvi-website</td><td>1 task</td><td class="val-good">0 (stopped)</td></tr>
            </tbody>
          </table>
          <div class="detail-note">11 Fargate tasks were running with no purpose (UAE wasn't being used). ~$200/mo wasted on compute.</div>
        </div>
      </div>

      <!-- 1.2 Delete 3 junk ALBs -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--red-dim)">üóëÔ∏è</div>
          <div class="action-title">
            <h3>Deleted 3 Junk Load Balancers</h3>
            <div class="action-plain">Removed 3 front doors that nobody was using ‚Äî old experiments left behind by someone testing things</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Load Balancer</th><th>Type</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td>agha-loadbalancer</td><td>internet-facing</td><td class="val-good">Deleted</td></tr>
              <tr><td>sample-film-session-alb</td><td>internet-facing</td><td class="val-good">Deleted</td></tr>
              <tr><td>sample-film-session-alb-v2</td><td>internet-facing</td><td class="val-good">Deleted</td></tr>
            </tbody>
          </table>
          <div class="detail-note">Only <strong>Muvi-UAT</strong> ALB kept ‚Äî the one real front door. ~$48/mo saved.</div>
        </div>
      </div>

      <!-- 1.3 Delete 6 temp RDS -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--red-dim)">üóÑÔ∏è</div>
          <div class="action-title">
            <h3>Deleted 6 Abandoned Database Servers</h3>
            <div class="action-plain">Removed 6 old standalone databases (2,820 GB of storage!) sitting there stopped but still costing money ‚Äî like paying rent on 6 empty warehouses</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Database</th><th>Size</th><th>Class</th><th>State</th></tr></thead>
            <tbody>
              <tr><td>temp-muvi-uat-main</td><td class="val-size">2,000 GB</td><td>db.t3.micro</td><td class="val-good">Deleted</td></tr>
              <tr><td>temp-muvi-uat-fb</td><td class="val-size">200 GB</td><td>db.t3.medium</td><td class="val-good">Deleted</td></tr>
              <tr><td>temp-muvi-uat-identity</td><td class="val-size">200 GB</td><td>db.t3.micro</td><td class="val-good">Deleted</td></tr>
              <tr><td>temp-muvi-uat-notification</td><td class="val-size">200 GB</td><td>db.t3.micro</td><td class="val-good">Deleted</td></tr>
              <tr><td>temp-muvi-uat-payment</td><td class="val-size">200 GB</td><td>db.t3.micro</td><td class="val-good">Deleted</td></tr>
              <tr><td>temp-muvi-uat-offer</td><td class="val-size">20 GB</td><td>db.t3.micro</td><td class="val-good">Deleted</td></tr>
            </tbody>
          </table>
          <div class="detail-note">All 6 were "temp" databases someone created and forgot about. Skipped final snapshots ‚Äî no real data. ~$280/mo saved (storage costs alone).</div>
        </div>
      </div>

      <!-- 1.4 Delete agha VPC -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--red-dim)">üèöÔ∏è</div>
          <div class="action-title">
            <h3>Demolished Entire Junk Network (agha-vpc)</h3>
            <div class="action-plain">Tore down a whole abandoned neighborhood ‚Äî VPC, subnets, NAT gateway, internet gateway, 2 ECS clusters, 3 running services, VPC peerings, security groups, route tables ‚Äî brick by brick</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Resource</th><th>ID</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td>NAT Gateway</td><td style="font-family:monospace;font-size:0.78rem">nat-05a3575223ded23d0</td><td class="val-good">Deleted</td></tr>
              <tr><td>VPC Peering (Frankfurt‚Üíagha)</td><td style="font-family:monospace;font-size:0.78rem">pcx-0190f1784ee4c30f6</td><td class="val-good">Deleted</td></tr>
              <tr><td>VPC Peering (main‚ÜíFrankfurt)</td><td style="font-family:monospace;font-size:0.78rem">pcx-0351c9bc3f265a5e1</td><td class="val-good">Deleted</td></tr>
              <tr><td>S3 Gateway Endpoint</td><td style="font-family:monospace;font-size:0.78rem">vpce-07de061b572bcd0c8</td><td class="val-good">Deleted</td></tr>
              <tr><td>ECS Cluster: agha-service-cluster</td><td>2 services drained + deleted</td><td class="val-good">INACTIVE</td></tr>
              <tr><td>ECS Cluster: sample-film-session</td><td>1 service drained + deleted</td><td class="val-good">INACTIVE</td></tr>
              <tr><td>Security Groups (2)</td><td>taska-ecs-sg + ecs-task-a</td><td class="val-good">Deleted</td></tr>
              <tr><td>Subnets (4)</td><td>All 4 in agha-vpc</td><td class="val-good">Deleted</td></tr>
              <tr><td>Internet Gateway</td><td style="font-family:monospace;font-size:0.78rem">igw-0dc7f3420084dc79d</td><td class="val-good">Deleted</td></tr>
              <tr><td>Route Tables (3)</td><td>Non-main route tables</td><td class="val-good">Deleted</td></tr>
              <tr><td>VPC</td><td style="font-family:monospace;font-size:0.78rem">vpc-0d1b744f68bdf4ac5</td><td class="val-good">Deleted</td></tr>
            </tbody>
          </table>
          <div class="detail-note">15 resources deleted in sequence. NAT Gateway alone was ~$32/mo. The 2 junk ECS clusters had 3 services still running doing absolutely nothing.</div>
        </div>
      </div>

      <!-- 1.5 Release EIPs -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--red-dim)">üè∑Ô∏è</div>
          <div class="action-title">
            <h3>Released 3 Idle IP Addresses</h3>
            <div class="action-plain">Gave back 3 phone numbers nobody was using ‚Äî AWS charges you for reserved numbers sitting idle</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>IP Address</th><th>Why Idle</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td>3.29.114.14</td><td>Never attached to anything</td><td class="val-good">Released</td></tr>
              <tr><td>51.112.175.162</td><td>Never attached to anything</td><td class="val-good">Released</td></tr>
              <tr><td>51.112.30.3</td><td>Freed from deleted NAT GW</td><td class="val-good">Released</td></tr>
            </tbody>
          </table>
          <div class="detail-note">~$11/mo saved. AWS charges ~$3.65/mo per idle Elastic IP.</div>
        </div>
      </div>

      <!-- 1.6 Delete serverless Redis -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--red-dim)">üî¥</div>
          <div class="action-title">
            <h3>Deleted Serverless Redis Cache</h3>
            <div class="action-plain">Removed a fancy auto-scaling Redis that nobody needed ‚Äî we already have a regular Redis. Like cancelling a premium subscription when you have the basic one</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Resource</th><th>Detail</th></tr></thead>
            <tbody>
              <tr><td>Serverless Cache</td><td>muvi-uat-redis-uae (Redis 7.1)</td></tr>
              <tr><td>VPC Endpoints (3)</td><td>Auto-deleted with serverless cache</td></tr>
              <tr><td>Kept</td><td class="val-good">muvi-uat-redis-uae-classic-001 (cache.t3.small)</td></tr>
            </tbody>
          </table>
          <div class="detail-note">~$90/mo saved. Serverless ElastiCache + 3 VPC Interface endpoints ($21.60/mo) gone.</div>
        </div>
      </div>

    </div><!-- /action-list -->

    <div class="savings-callout">
      <span class="savings-icon">üí∞</span>
      <div class="savings-text">
        <div class="savings-number">~$691/month saved</div>
        <div class="savings-label">6 temp RDS ($280) + 3 ALBs ($48) + Fargate compute ($200) + NAT GW ($32) + 3 EIPs ($11) + Serverless Redis ($90) + 2 junk ECS clusters ($30)</div>
      </div>
    </div>
  </div><!-- /phase 1 -->

  <div class="phase-connector"></div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PHASE 2 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="phase" data-phase="2">
    <div class="phase-header">
      <div class="phase-badge p2">üì¶</div>
      <div class="phase-title-block">
        <h2>Phase 2 ‚Äî Database Migration</h2>
        <div class="phase-meta">February 24, 2026 &nbsp;‚Ä¢&nbsp; Frankfurt ‚Üí UAE &nbsp;‚Ä¢&nbsp; ~36 min <span class="done-tag">COMPLETE</span></div>
      </div>
    </div>

    <div class="analogy-banner">
      <strong>Plain English:</strong> We needed to move all the data from 6 old warehouses in Frankfurt into our new centralized warehouse in UAE. We rented a temporary moving truck (EC2), loaded up everything (~52.9 million items), drove it cross-region, unloaded it, then returned the truck and deleted all evidence.
    </div>

    <div class="action-list">

      <!-- 2.1 Setup -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--orange-dim)">üöõ</div>
          <div class="action-title">
            <h3>Rented the Moving Truck (Temp EC2)</h3>
            <div class="action-plain">Launched a temporary computer in Frankfurt, gave it the right badge (IAM role) to talk to databases, installed PostgreSQL tools ‚Äî our moving crew</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Resource</th><th>Detail</th></tr></thead>
            <tbody>
              <tr><td>EC2 Instance</td><td>t3.medium, Amazon Linux 2023</td></tr>
              <tr><td>IAM Role</td><td>db-migration-ec2-role (SSM access)</td></tr>
              <tr><td>Instance Profile</td><td>db-migration-ec2-profile</td></tr>
              <tr><td>PostgreSQL Client</td><td>pg15 (pre-installed)</td></tr>
              <tr><td>Security Groups</td><td>Same as ECS (access to all DBs)</td></tr>
            </tbody>
          </table>
          <div class="detail-note">No SSH key needed ‚Äî used AWS Session Manager (SSM) to control the instance remotely.</div>
        </div>
      </div>

      <!-- 2.2 Audit Prod -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--orange-dim)">üîç</div>
          <div class="action-title">
            <h3>Photographed the Production House (READ-ONLY)</h3>
            <div class="action-plain">Studied production's 6 Aurora clusters to understand what we're building ‚Äî instance sizes, versions, read replicas ‚Äî without touching anything</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Prod Cluster</th><th>Engine</th><th>Instances</th><th>Class</th></tr></thead>
            <tbody>
              <tr><td>muvi-prod-main-service</td><td>Aurora PG 14.17</td><td>writer + reader</td><td>db.r5.2xlarge</td></tr>
              <tr><td>muvi-prod-identity</td><td>Aurora PG 14.15</td><td>writer + reader</td><td>db.r5.xlarge</td></tr>
              <tr><td>muvi-prod-payments</td><td>Aurora PG 14.15</td><td>writer + reader</td><td>db.r5.xlarge</td></tr>
              <tr><td>muvi-prod-fb</td><td>Aurora PG 14.17</td><td>writer + reader</td><td>db.r5.large</td></tr>
              <tr><td>muvi-prod-notification</td><td>Aurora PG 14.15</td><td>writer only</td><td>db.r5.large</td></tr>
              <tr><td>muvi-offer-prod</td><td>Aurora PG 14.17</td><td>writer + reader</td><td>db.r5.large</td></tr>
            </tbody>
          </table>
          <div class="detail-note">Prod uses separate cluster per service (big/expensive). UAE uses 1 shared cluster with 6 databases (smaller/cheaper). Same architecture pattern, cost-appropriate for testing.</div>
        </div>
      </div>

      <!-- 2.3 Migration -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--orange-dim)">üì§</div>
          <div class="action-title">
            <h3>Moved All 6 Databases (52.9M rows, 18.6 GB)</h3>
            <div class="action-plain">For each database: dropped whatever was there, created a fresh empty one, then piped data straight from Frankfurt ‚Üí UAE through our moving truck ‚Äî pg_dump | pg_restore ‚Äî like a fire hose transferring water between two tanks</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Database</th><th>Tables</th><th>Rows</th><th>Duration</th></tr></thead>
            <tbody>
              <tr><td>muvi_identity_service</td><td>22</td><td class="val-size">23,603</td><td>32 seconds</td></tr>
              <tr><td>muvi_payment_service</td><td>7</td><td class="val-size">4,653</td><td>18 seconds</td></tr>
              <tr><td>muvi_fb_db</td><td>20</td><td class="val-size">5,511</td><td>30 seconds</td></tr>
              <tr><td>muvi_main_service</td><td>39</td><td class="val-size">26,447,549</td><td>20 min 37 sec</td></tr>
              <tr><td>muvi_offer_service</td><td>6</td><td class="val-size">26,399,145</td><td>13 min 49 sec</td></tr>
              <tr><td>muvi_notification_service</td><td>6</td><td class="val-size">3,657</td><td>~10 seconds</td></tr>
            </tbody>
          </table>
          <div class="detail-note">
            <strong>Gotcha fixed:</strong> First attempt failed because PostgreSQL ENUM types survived <code>DROP SCHEMA</code>. Switched to <code>DROP DATABASE</code> + <code>CREATE DATABASE</code> for a truly clean slate. Zero errors after that.
          </div>
        </div>
      </div>

      <!-- 2.4 Cleanup -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--orange-dim)">üßΩ</div>
          <div class="action-title">
            <h3>Returned the Truck &amp; Cleaned Up</h3>
            <div class="action-plain">Terminated the EC2 instance, deleted the IAM role, cleaned up temp files ‚Äî zero footprint left in Frankfurt</div>
          </div>
          <span class="action-status">‚úÖ Done <span class="correction-badge">‚ö†Ô∏è 2 corrections</span></span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Cleanup Item</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td>EC2 i-0b910d07cd8af3231</td><td class="val-good">Terminated</td></tr>
              <tr><td>IAM Role: db-migration-ec2-role</td><td class="val-good">Deleted</td></tr>
              <tr><td>Instance Profile: db-migration-ec2-profile</td><td class="val-good">Deleted</td></tr>
              <tr><td>Lambda: db-row-counter</td><td class="val-good">Deleted</td></tr>
              <tr><td>Lambda IAM role</td><td class="val-good">Deleted</td></tr>
              <tr><td>Temp files (5 JSON/shell files)</td><td class="val-good">Removed</td></tr>
            </tbody>
          </table>
          <div class="detail-note warn">
            <strong>Honesty note ‚Äî 2 things were missed and caught later:</strong><br>
            1. <strong>EC2 i-0114ff1bbbd35ba1d</strong> (db-migration-temp) was left RUNNING for ~16 hours. Found &amp; terminated during audit. Cost leaked: ~$0.50.<br>
            2. <strong>SG rule "DB Preparation"</strong> on Frankfurt payment RDS SG was not reverted. Found &amp; reverted during audit.<br>
            Both fixed on Feb 24 during a comprehensive Frankfurt footprint audit. <strong>Frankfurt is now 100% clean.</strong>
          </div>
        </div>
      </div>

    </div><!-- /action-list -->

    <div class="migration-stats">
      <div class="mig-stat"><span class="mig-num cyan">52.9M</span><span class="mig-label">Total Rows</span></div>
      <div class="mig-stat"><span class="mig-num purple">18.6 GB</span><span class="mig-label">Data Size</span></div>
      <div class="mig-stat"><span class="mig-num green">100</span><span class="mig-label">Tables</span></div>
      <div class="mig-stat"><span class="mig-num orange">~36 min</span><span class="mig-label">Migration Time</span></div>
      <div class="mig-stat"><span class="mig-num accent">$0.02</span><span class="mig-label">Cost Incurred</span></div>
    </div>
  </div><!-- /phase 2 -->

  <div class="phase-connector"></div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PHASE 2B ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="phase" data-phase="2b">
    <div class="phase-header">
      <div class="phase-badge p2b">üèóÔ∏è</div>
      <div class="phase-title-block">
        <h2>Phase 2B ‚Äî DB Ecosystem (RDS Proxies + VPC Peering + Security)</h2>
        <div class="phase-meta">February 24, 2026 &nbsp;‚Ä¢&nbsp; UAE me-central-1 <span class="done-tag">COMPLETE</span></div>
      </div>
    </div>

    <div class="analogy-banner">
      <strong>Plain English:</strong> The database data is now in UAE, but the apps can't reach it yet ‚Äî they live in a different building (VPC). This phase was about building a bridge between the two buildings, hiring receptionists (RDS Proxies) to manage the flow, creating safes for passwords, and locking the database's front door so only internal visitors can get in.
    </div>

    <div class="action-list">

      <!-- 2B.1 Fix Aurora public access -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">üîí</div>
          <div class="action-title">
            <h3>Locked the Database's Front Door</h3>
            <div class="action-plain">Moved the database from street-facing to internal-only ‚Äî changed PubliclyAccessible from TRUE to FALSE on both Aurora instances. No more random internet visitors.</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Instance</th><th>Before</th><th>After</th></tr></thead>
            <tbody>
              <tr><td>uatclusterdb-instance-1</td><td class="val-warn">PubliclyAccessible: TRUE ‚ö†Ô∏è</td><td class="val-good">PubliclyAccessible: FALSE ‚úÖ</td></tr>
              <tr><td>uatclusterdb-instance-1-me-central-1b</td><td class="val-warn">PubliclyAccessible: TRUE ‚ö†Ô∏è</td><td class="val-good">PubliclyAccessible: FALSE ‚úÖ</td></tr>
            </tbody>
          </table>
          <div class="detail-note">Critical security fix. Anyone with the password could've connected from the internet before. Now only internal VPC traffic can reach port 5432.</div>
        </div>
      </div>

      <!-- 2B.2 VPC Peering -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">üåâ</div>
          <div class="action-title">
            <h3>Built the Bridge Between Buildings (VPC Peering + Routes)</h3>
            <div class="action-plain">Connected the App building (Main VPC, 10.60.0.0/16) to the Database building (Database VPC, 10.50.0.0/16) ‚Äî then put up 9 road signs (route table entries) so traffic knows the way</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>VPC Peering</th><th>Detail</th></tr></thead>
            <tbody>
              <tr><td>Peering ID</td><td>pcx-015fcde392996ef5d</td></tr>
              <tr><td>Side A</td><td>Main VPC ‚Äî vpc-0ab936370488229bd (10.60.0.0/16)</td></tr>
              <tr><td>Side B</td><td>Database VPC ‚Äî vpc-05e2e9c2e88029d4d (10.50.0.0/16)</td></tr>
              <tr><td>Status</td><td class="val-good">ACTIVE</td></tr>
            </tbody>
          </table>
          <br>
          <table class="detail-table">
            <thead><tr><th>Route Table</th><th>VPC Side</th><th>Name</th><th>Route Added</th></tr></thead>
            <tbody>
              <tr><td>rtb-02471d72c6b2f4dd6</td><td>Main</td><td>rt-private-b</td><td class="val-good">10.50.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-0dc208b77187889e8</td><td>Main</td><td>rt-private-a</td><td class="val-good">10.50.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-05fb7cbd802026a81</td><td>Main</td><td>(main)</td><td class="val-good">10.50.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-057aa39aa4b148292</td><td>Main</td><td>rt-public</td><td class="val-good">10.50.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-0e03cece634427e14</td><td>DB</td><td>rtb-private3-1c</td><td class="val-good">10.60.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-0f34bf460956e2c85</td><td>DB</td><td>rtb-private1-1a</td><td class="val-good">10.60.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-02f56ed37c0dd94cd</td><td>DB</td><td>rtb-private2-1b</td><td class="val-good">10.60.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-0c6264add5e0f9a46</td><td>DB</td><td>rtb-public</td><td class="val-good">10.60.0.0/16 ‚Üí pcx</td></tr>
              <tr><td>rtb-05ec67effb875a0c5</td><td>DB</td><td>(main)</td><td class="val-good">10.60.0.0/16 ‚Üí pcx</td></tr>
            </tbody>
          </table>
          <div class="detail-note">9 route tables updated total (4 in Main VPC, 5 in Database VPC). Without these "road signs," the bridge exists but nobody knows how to get to it.</div>
        </div>
      </div>

      <!-- 2B.3 Security Group -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">üìã</div>
          <div class="action-title">
            <h3>Created the Guest List (RDS Proxy Security Group)</h3>
            <div class="action-plain">Made a guest list for the proxy receptionists: "Only accept visitors from the app building (10.60.0.0/16) and database building (10.50.0.0/16) on door 5432"</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Property</th><th>Value</th></tr></thead>
            <tbody>
              <tr><td>SG Name</td><td>muvi-uat-rds-proxy-sg</td></tr>
              <tr><td>SG ID</td><td>sg-06c22a1a4cdce43b0</td></tr>
              <tr><td>VPC</td><td>Database VPC (vpc-05e2e9c2e88029d4d)</td></tr>
              <tr><td>Rule 1</td><td class="val-good">TCP 5432 from 10.60.0.0/16 (Main VPC via peering)</td></tr>
              <tr><td>Rule 2</td><td class="val-good">TCP 5432 from 10.50.0.0/16 (Database VPC internal)</td></tr>
            </tbody>
          </table>
          <div class="detail-note">Also updated Aurora's own SG (<code>sg-06048c6d73bab420a</code>) to allow traffic from this proxy SG on port 5432 ‚Äî so the database recognizes the proxy as a trusted visitor.</div>
        </div>
      </div>

      <!-- 2B.4 Secrets Manager -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">üîê</div>
          <div class="action-title">
            <h3>Put Passwords in 6 Safes (Secrets Manager)</h3>
            <div class="action-plain">Created 6 secure vaults ‚Äî one per database ‚Äî each containing username, password, host, port, and database name. This is how the proxy will know the database credentials without hardcoding them.</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Secret Name</th><th>Database</th><th>ARN Suffix</th></tr></thead>
            <tbody>
              <tr><td>muvi-uat-main-db-secret</td><td>muvi_main_service</td><td>‚Ä¶Bq8VjU</td></tr>
              <tr><td>muvi-uat-identity-db-secret</td><td>muvi_identity_service</td><td>‚Ä¶tCaxe5</td></tr>
              <tr><td>muvi-uat-payment-db-secret</td><td>muvi_payment_service</td><td>‚Ä¶5JStyc</td></tr>
              <tr><td>muvi-uat-fb-db-secret</td><td>muvi_fb_db</td><td>‚Ä¶SkXA9h</td></tr>
              <tr><td>muvi-uat-notification-db-secret</td><td>muvi_notification_service</td><td>‚Ä¶3M5lzB</td></tr>
              <tr><td>muvi-uat-offer-db-secret</td><td>muvi_offer_service</td><td>‚Ä¶26v6AP</td></tr>
            </tbody>
          </table>
          <div class="detail-note warn">
            <strong>Gotcha fixed:</strong> PowerShell's <code>ConvertTo-Json</code> stripped the quotes inside the JSON values, making them invalid. RDS Proxy kept getting AUTH_FAILURE. Fixed by writing JSON to a temp file and using <code>file://</code> approach.
          </div>
        </div>
      </div>

      <!-- 2B.5 IAM Role -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">ü™™</div>
          <div class="action-title">
            <h3>Created a Badge for the Proxy (IAM Role)</h3>
            <div class="action-plain">Made an ID badge that says: "I am the RDS Proxy. I am authorized to open any safe that starts with muvi-uat-*" ‚Äî this lets the proxy read the database passwords from Secrets Manager</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Property</th><th>Value</th></tr></thead>
            <tbody>
              <tr><td>Role Name</td><td>muvi-uat-rds-proxy-role</td></tr>
              <tr><td>ARN</td><td style="font-size:0.78rem">arn:aws:iam::739991759290:role/muvi-uat-rds-proxy-role</td></tr>
              <tr><td>Trusted By</td><td>rds.amazonaws.com</td></tr>
              <tr><td>Policy</td><td>SecretsManagerAccess ‚Üí muvi-uat-* secrets</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- 2B.6 RDS Proxies -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">üë©‚Äçüíº</div>
          <div class="action-title">
            <h3>Hired 6 Receptionists (RDS Proxies)</h3>
            <div class="action-plain">Created 6 connection pooling proxies ‚Äî one per microservice. Each receptionist sits in the database building lobby, manages a line of visitors, and forwards requests to the right database</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <table class="detail-table">
            <thead><tr><th>Proxy Name</th><th>Target DB</th><th>Status</th></tr></thead>
            <tbody>
              <tr><td>uat-main-proxy</td><td>muvi_main_service</td><td class="val-good">Available</td></tr>
              <tr><td>uat-identity-proxy</td><td>muvi_identity_service</td><td class="val-good">Available</td></tr>
              <tr><td>uat-payment-proxy</td><td>muvi_payment_service</td><td class="val-good">Available</td></tr>
              <tr><td>uat-fb-proxy</td><td>muvi_fb_db</td><td class="val-good">Available</td></tr>
              <tr><td>uat-notification-proxy</td><td>muvi_notification_service</td><td class="val-good">Available</td></tr>
              <tr><td>uat-offer-proxy</td><td>muvi_offer_service</td><td class="val-good">Available</td></tr>
            </tbody>
          </table>
          <table class="detail-table" style="margin-top:14px">
            <thead><tr><th>Config</th><th>Value</th><th>Matches Prod?</th></tr></thead>
            <tbody>
              <tr><td>Engine</td><td>POSTGRESQL</td><td class="val-good">‚úÖ Yes</td></tr>
              <tr><td>TLS Required</td><td>Yes</td><td class="val-good">‚úÖ Yes</td></tr>
              <tr><td>Idle Timeout</td><td>600 seconds</td><td class="val-good">‚úÖ Yes</td></tr>
              <tr><td>Max Connections</td><td>100%</td><td class="val-good">‚úÖ Yes</td></tr>
              <tr><td>Max Idle Connections</td><td>50%</td><td class="val-good">‚úÖ Yes</td></tr>
              <tr><td>Borrow Timeout</td><td>120 seconds</td><td class="val-good">‚úÖ Yes</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- 2B.7 Read-Only Endpoints -->
      <div class="action-card">
        <div class="action-card-header" onclick="toggleCard(this)">
          <div class="action-icon" style="background:var(--purple-dim)">üìñ</div>
          <div class="action-title">
            <h3>Gave Each Receptionist a Second Window (Read-Only Endpoints)</h3>
            <div class="action-plain">Created 6 read-only endpoints ‚Äî like a "questions only" counter at each reception desk. Apps that just need to read data (not write) go to this faster window instead</div>
          </div>
          <span class="action-status">‚úÖ Done</span>
          <span class="chevron">‚ñº</span>
        </div>
        <div class="action-detail">
          <div class="endpoint-map">
            <div class="endpoint-card">
              <div class="ep-service">Main</div>
              <div class="ep-row"><span class="ep-label">Write:</span><span class="ep-val">uat-main-proxy.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
              <div class="ep-row"><span class="ep-label">Read:</span><span class="ep-val">uat-main-proxy-read-only.endpoint.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
            </div>
            <div class="endpoint-card">
              <div class="ep-service">Identity</div>
              <div class="ep-row"><span class="ep-label">Write:</span><span class="ep-val">uat-identity-proxy.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
              <div class="ep-row"><span class="ep-label">Read:</span><span class="ep-val">uat-identity-proxy-read-only.endpoint.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
            </div>
            <div class="endpoint-card">
              <div class="ep-service">Payment</div>
              <div class="ep-row"><span class="ep-label">Write:</span><span class="ep-val">uat-payment-proxy.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
              <div class="ep-row"><span class="ep-label">Read:</span><span class="ep-val">uat-payment-proxy-read-only.endpoint.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
            </div>
            <div class="endpoint-card">
              <div class="ep-service">F&amp;B</div>
              <div class="ep-row"><span class="ep-label">Write:</span><span class="ep-val">uat-fb-proxy.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
              <div class="ep-row"><span class="ep-label">Read:</span><span class="ep-val">uat-fb-proxy-read-only.endpoint.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
            </div>
            <div class="endpoint-card">
              <div class="ep-service">Notification</div>
              <div class="ep-row"><span class="ep-label">Write:</span><span class="ep-val">uat-notification-proxy.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
              <div class="ep-row"><span class="ep-label">Read:</span><span class="ep-val">uat-notification-proxy-read-only.endpoint.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
            </div>
            <div class="endpoint-card">
              <div class="ep-service">Offer</div>
              <div class="ep-row"><span class="ep-label">Write:</span><span class="ep-val">uat-offer-proxy.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
              <div class="ep-row"><span class="ep-label">Read:</span><span class="ep-val">uat-offer-proxy-read-only.endpoint.proxy-cwyxrbeukelc.me-central-1.rds.amazonaws.com</span></div>
            </div>
          </div>
          <div class="detail-note" style="margin-top:16px">These become <code>DB_WRITE_HOST</code> and <code>DB_READ_HOST</code> in each service's environment variables ‚Äî exactly how production works.</div>
        </div>
      </div>

    </div><!-- /action-list -->

    <div class="cost-callout">
      <span class="cost-icon">üìä</span>
      <div class="cost-text">
        <div class="cost-number">~$265/month added</div>
        <div class="cost-label">6 RDS Proxies (~$263/mo) + 6 Secrets Manager secrets (~$2.40/mo) + VPC Peering ($0) + IAM Role ($0)</div>
      </div>
    </div>

    <!-- Prod vs UAE comparison -->
    <div style="margin-top:32px">
      <h3 style="font-size:1.1rem;margin-bottom:16px;color:var(--text-dim)">Production vs UAE Comparison (After Phase 2B)</h3>
      <table class="detail-table" style="background:var(--surface);border:1px solid var(--border);border-radius:10px;overflow:hidden">
        <thead><tr><th>Aspect</th><th>Production</th><th>UAE UAT</th><th>Match?</th></tr></thead>
        <tbody>
          <tr><td>RDS Proxies</td><td>6</td><td>6</td><td class="val-good">‚úÖ</td></tr>
          <tr><td>Read/Write Split</td><td>Writer + RO endpoints</td><td>Writer + RO endpoints</td><td class="val-good">‚úÖ</td></tr>
          <tr><td>Pool Config</td><td>100% / 50% / 120s</td><td>100% / 50% / 120s</td><td class="val-good">‚úÖ</td></tr>
          <tr><td>TLS Required</td><td>Yes</td><td>Yes</td><td class="val-good">‚úÖ</td></tr>
          <tr><td>Idle Timeout</td><td>600s</td><td>600s</td><td class="val-good">‚úÖ</td></tr>
          <tr><td>Aurora Access</td><td>Private (SG-based)</td><td>Private (SG + CIDR)</td><td class="val-good">‚úÖ</td></tr>
          <tr><td>Topology</td><td>6 clusters in 1 VPC</td><td>1 cluster in DB VPC, peered</td><td class="val-warn">‚ö†Ô∏è OK for UAT</td></tr>
          <tr><td>Instance Class</td><td>r5.large ‚Üí r5.2xlarge</td><td>db.t3.medium</td><td class="val-warn">‚ö†Ô∏è OK for UAT</td></tr>
        </tbody>
      </table>
    </div>
  </div><!-- /phase 2b -->

  <!-- Footer -->
  <div class="footer">
    <p>Generated February 24, 2026 &nbsp;‚Ä¢&nbsp; Muvi Cinemas UAE Build Project</p>
    <p style="margin-top:4px">Phases 3‚Äì11 remaining: Networking ‚Üí Redis ‚Üí ECS+ECR ‚Üí S3/CDN/WAF ‚Üí SSM Params ‚Üí CI/CD ‚Üí Sandboxes ‚Üí Testing ‚Üí Decommission Frankfurt</p>
  </div>

</div><!-- /container -->

<script>
  // Toggle individual cards
  function toggleCard(header) {
    const card = header.closest('.action-card');
    card.classList.toggle('open');
  }

  // Toggle all
  let allOpen = false;
  function toggleAll() {
    allOpen = !allOpen;
    document.querySelectorAll('.action-card').forEach(c => {
      if (allOpen) c.classList.add('open');
      else c.classList.remove('open');
    });
    document.getElementById('toggleIcon').textContent = allOpen ? '‚ñº' : '‚ñ∂';
    document.getElementById('toggleText').textContent = allOpen ? 'Collapse All Details' : 'Expand All Details';
  }

  // Search / filter
  function filterCards(query) {
    const q = query.toLowerCase().trim();
    document.querySelectorAll('.action-card').forEach(card => {
      if (!q) {
        card.style.display = '';
        return;
      }
      const text = card.textContent.toLowerCase();
      card.style.display = text.includes(q) ? '' : 'none';
    });
    // Also show/hide phases if all their cards are hidden
    document.querySelectorAll('.phase').forEach(phase => {
      const visible = phase.querySelectorAll('.action-card:not([style*="display: none"])');
      if (!q) {
        phase.style.display = '';
      } else {
        phase.style.display = visible.length > 0 ? '' : 'none';
      }
    });
  }
</script>

</body>
</html>
